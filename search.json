[{"title":"测试网页","url":"/2022/06/08/测试网页/","content":"\n### 各种组件测试\n\n##### 区块测试\n\n{% tabs First unique name %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n\n##### 加密\n\n```yaml\nencrypt: true\n```\n\n\n\n\n\n\n\n### 图片测试\n\n![image-20220609091040114](images/image-20220609091040114.png)\n\n\n\n"},{"title":"hexo设置文章加密","url":"/2020/04/13/hexo设置文章加密/","content":"\n### 使用``hexo-encrypt``插件\n\n##### 安装\n\n```bash\nnpm install hexo-encrypt --save\n```\n\n##### 在``hexo``的配置文件`_config.yml`下进行配置\n\n```bash\nencrypt: \n  password: 123456\n```\n\n##### 在需要加密的文章中添加信息头\n\n```yaml\n---\ntitle: Hello World\nencrypt: true\n---\n```\n\n##### 如果需要单独设置加密密码\n\n```yaml\n---\ntitle: Hello World\nencrypt: true\nenc_pwd: 123456\n---\n```\n\n","tags":["hexo"]},{"title":"Centos7 安装配置Gluster FS实现K8S分布式存储","url":"/2017/05/27/Centos7_安装配置Gluster_FS实现K8S分布式存储/","content":"\n\n\n\n### 关闭``selinux``、防火墙\n\n```bash\n# 关闭selinux\nsetenforce 0\nsed -i 's/enforcing/disabled/'  /etc/selinux/config\n\n# 关闭firewalld\nsystemctl disable firewalld\nsystemctl stop    firewalld\n```\n\n### 同步时间\n\n```bash\n# 安装ntp\nyum install -y ntp\n\n# 开启并设置开机自启动\nsystemctl enable ntpd\nsystemctl start  ntpd\n\n# 同步时间\nntpdate -u cn.pool.ntp.org\n\n# 重启ntp\nsystemctl restart ntpd\n\n# 查看网络中的ntp服务器\nntpq -p\n```\n\n### 安装配置``GlusterFS``\n\n```bash\n# 安装\nyum install -y centos-release-gluster6\nyum install -y glusterfs glusterfs-libs glusterfs-server  glusterfs-fuse\n\n# 开启并设置开机自启\nsystemctl start  glusterd\nsystemctl enable glusterd\n\n# 添加信任(在一台机器上添加别的机器就好)\ngluster peer probe 192.168.1.2\ngluster peer probe 192.168.1.3\ngluster peer probe 192.168.1.4\ngluster peer status\n```\n\n### 安装配置``Heketi``\n\n```bash\n# 添加heketi账号\nadduser heketi\n\n# 设置密码\necho 'heketi' | passwd heketi --stdin\n\n# 设置免密sudo\nchmod u+w /etc/sudoers\nsed  -i '/networking/iheketi    ALL=(ALL)       NOPASSWD: ALL'  /etc/sudoers\nchmod u-w /etc/sudoers\n\n# 设置免密登录(服务端进行此操作)\nsu heketi\nssh-keygen -t rsa -b 4096\nssh-copy-id -i heketi@192.168.1.2\nssh-copy-id -i heketi@192.168.1.3\nssh-copy-id -i heketi@192.168.1.4\n\n# 安装heketi-client\nyum install -y heketi-client\n\n\n# 安装heketi(服务端进行此操作)\nyum install -y heketi\n\n# 配置heketi服务\ncat > /etc/heketi/heketi.json << EOF\n{\n  \"_port_comment\": \"Heketi Server Port Number\",\n  \"port\": \"8080\",\n\n  \"_use_auth\": \"Enable JWT authorization. Please enable for deployment\",\n  \"use_auth\": true,\n\n  \"_jwt\": \"Private keys for access\",\n  \"jwt\": {\n    \"_admin\": \"Admin has access to all APIs\",\n    \"admin\": {\n      \"key\": \"Teleinfo-88\"\n    },\n    \"_user\": \"User only has access to /volumes endpoint\",\n    \"user\": {\n      \"key\": \"Teleinfo-88\"\n    }\n  },\n\n  \"_glusterfs_comment\": \"GlusterFS Configuration\",\n  \"glusterfs\": {\n    \"_executor_comment\": [\n      \"Execute plugin. Possible choices: mock, ssh\",\n      \"mock: This setting is used for testing and development.\",\n      \"      It will not send commands to any node.\",\n      \"ssh:  This setting will notify Heketi to ssh to the nodes.\",\n      \"      It will need the values in sshexec to be configured.\",\n      \"kubernetes: Communicate with GlusterFS containers over\",\n      \"            Kubernetes exec api.\"\n    ],\n    \"executor\": \"ssh\",\n\n    \"_sshexec_comment\": \"SSH username and private key file information\",\n    \"sshexec\": {\n      \"keyfile\": \"/home/heketi/.ssh/id_rsa\",\n      \"user\": \"heketi\",\n      \"port\": \"22\",\n      \"sudo\": true,\n      \"fstab\": \"/etc/fstab\"\n    },\n\n    \"_kubeexec_comment\": \"Kubernetes configuration\",\n    \"kubeexec\": {\n      \"host\" :\"https://kubernetes.host:8443\",\n      \"cert\" : \"/path/to/crt.file\",\n      \"insecure\": false,\n      \"user\": \"kubernetes username\",\n      \"password\": \"password for kubernetes user\",\n      \"namespace\": \"OpenShift project or Kubernetes namespace\",\n      \"fstab\": \"Optional: Specify fstab file on node.  Default is /etc/fstab\"\n    },\n\n    \"_db_comment\": \"Database file name\",\n    \"db\": \"/var/lib/heketi/heketi.db\",\n\n    \"_loglevel_comment\": [\n      \"Set log level. Choices are:\",\n      \"  none, critical, error, warning, info, debug\",\n      \"Default is warning\"\n    ],\n    \"loglevel\" : \"debug\"\n  }\n}\nEOF\n\n\n# 启动并设置开机自启\nsystemctl enable heketi\nsystemctl start  heketi\n\n\n\n# 通过topology.json文件定义并组建Gluster FS集群\ncat /etc/heketi/topology.json\n{\n  \"clusters\": [\n    {\n      \"nodes\": [\n        {\n          \"node\": {\n            \"hostnames\": {\n              \"manage\": [\n                \"192.168.1.2\"\n              ],\n              \"storage\": [\n                \"192.168.1.2\"\n              ]\n            },\n            \"zone\": 1\n          },\n          \"devices\": [\n            \"/dev/sdb\"\n          ]\n        },\n        {\n          \"node\": {\n            \"hostnames\": {\n              \"manage\": [\n                \"192.168.1.3\"\n              ],\n              \"storage\": [\n                \"192.168.1.3\"\n              ]\n            },\n            \"zone\": 1\n          },\n          \"devices\": [\n            \"/dev/sdb\"\n          ]\n        },\n        {\n          \"node\": {\n            \"hostnames\": {\n              \"manage\": [\n                \"192.168.1.4\"\n              ],\n              \"storage\": [\n                \"192.168.1.4\"\n              ]\n            },\n            \"zone\": 1\n          },\n          \"devices\": [\n            \"/dev/sdb\"\n          ]\n        }\n      ]\n    }\n  ]\n}\nEOF\n\n# 初始化集群\nheketi-cli --server http://localhost:8080 --user admin --secret Teleinfo-88 topology load --json=/etc/heketi/topology.json\nheketi-cli --server http://localhost:8080 --user admin --secret Teleinfo-88 topology info\n\n# 删除数据\n#rm -rf /var/lib/heketi/heketi.db\n```\n\n","tags":["centos"]}]